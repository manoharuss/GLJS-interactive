<!DOCTYPE html>
<html>
<head>
    <meta charset='utf-8' />
    <title></title>
    <meta name='viewport' content='initial-scale=1,maximum-scale=1,user-scalable=no' />
    <script src='https://api.mapbox.com/mapbox-gl-js/v0.19.1/mapbox-gl.js'></script>
    <link href='https://api.mapbox.com/mapbox-gl-js/v0.19.1/mapbox-gl.css' rel='stylesheet' />



</head>
<body>
<!--  This below 2 lines are for directions API-->
  <script src='https://api.mapbox.com/mapbox-gl-js/plugins/mapbox-gl-directions/v2.0.0/mapbox-gl-directions.js'></script>
  <link rel='stylesheet' href='https://api.mapbox.com/mapbox-gl-js/plugins/mapbox-gl-directions/v2.0.0/mapbox-gl-directions.css' type='text/css' />

<!--  Lets throw in a geocoder while we are at it!!! Ehahahahahaha-->
  <script src='https://api.mapbox.com/mapbox-gl-js/plugins/mapbox-gl-geocoder/v1.1.0/mapbox-gl-geocoder.js'></script>
  <link rel='stylesheet' href='https://api.mapbox.com/mapbox-gl-js/plugins/mapbox-gl-geocoder/v1.1.0/mapbox-gl-geocoder.css' type='text/css' />




<style>
      #menu {
          position: absolute;
          background: #fff;
          padding: 10px;
          font-family: 'Open Sans', sans-serif;
      }
</style>



<style>
    .mapboxgl-popup {
        max-width: 400px;
        font: 12px/20px 'Helvetica Neue', Arial, Helvetica, sans-serif;
    }
    .marker-title {
        font-weight: 700;
    }

    .directions-control.directions-control-inputs{top:80px;
    }
</style>



<style>
    #fly {
        display: block;
        position: relative;
        margin: 0px auto;
        width: 20%;
        height: 40px;
        padding: 10px;
        border: none;
        border-radius: 3px;
        font-size: 10px;
        text-align: center;
        color: #fff;
        background: #ee8a65;
    }
</style>
<div id='map' style='width: 1200px; height: 900px;'></div>
<br/>
<button onclick='fly();' id='fly'>Fly</button>








<div id='menu'>
    <input id='basic' type='radio' name='rtoggle' value='basic' checked='checked'>
    <label for='basic'>basic</label>
    <input id='streets' type='radio' name='rtoggle' value='streets'>
    <label for='streets'>streets</label>
    <input id='emerald' type='radio' name='rtoggle' value='emerald'>
    <label for='emerald'>emerald</label>
    <input id='bright' type='radio' name='rtoggle' value='bright'>
    <label for='bright'>bright</label>
    <input id='light' type='radio' name='rtoggle' value='light'>
    <label for='light'>light</label>
    <input id='dark' type='radio' name='rtoggle' value='dark'>
    <label for='dark'>dark</label>
    <input id='satellite' type='radio' name='rtoggle' value='satellite'>
    <label for='satellite'>satellite</label>
</div>

<script>
mapboxgl.accessToken = 'pk.eyJ1IjoibWFub2hhcnVzcyIsImEiOiJjaW1mMDZiYnIwMTU2dGlsdm5pMWpoYm5iIn0.X6u7Ke6rPN5ap2Na15HItw';
  var map = new mapboxgl.Map({
      container: 'map',
      style: 'mapbox://styles/manoharuss/cioy98s910011dsj55pkeua0s',
      // center: [80.65986, 16.50168],
      // zoom: 11,
      hash: true

  });


  map.addControl(new mapboxgl.Geocoder());
  map.addControl(new mapboxgl.Directions());





</script>




<script>
mapboxgl.accessToken = 'pk.eyJ1IjoibWFub2hhcnVzcyIsImEiOiJjaW1mMDZiYnIwMTU2dGlsdm5pMWpoYm5iIn0.X6u7Ke6rPN5ap2Na15HItw';
var markers = {
    "type": "FeatureCollection",
    "features": [{
        "type": "Feature",
        "properties": {
            "description": "<div class=\"marker-title\">Maris Stella College</div><p><a href=\"http://marisstella.ac.in\" target=\"_blank\" title=\"Opens in a new window\">Check website.</a> It is a girls only college with programs from 11th till all the way upto post graduation. Really good. My mom studied here :)</p>",
            "marker-symbol": "college"
        },
        "geometry": {
            "type": "Point",
            "coordinates": [80.65986, 16.50168]
        }
    }, {
        "type": "Feature",
        "properties": {
            "description": "<div class=\"marker-title\">Andhra Loyola College</div><p>As you can see from the map, it is gigantic. <a href=\"www.andhraloyolacollege.ac.in\" target=\"_blank\" title=\"Opens in a new window\">Andhra Loyola College</a> occupies a great deal of history with Vijayawada. A person can study from their kindergarten till post-doctoral, get a job here and retire here. Huge institution. Co-ed as well:p</p>",
            "marker-symbol": "college"
        },
        "geometry": {
            "type": "Point",
            "coordinates": [80.66088, 16.50949]
        }
    }, {
        "type": "Feature",
        "properties": {
            "description": "<div class=\"marker-title\">Cathedral Church</div><p> It is fficially called as St. Paul's. Locally called as the cathedral church. Good architecture.</p>",
            "marker-symbol": "religious-christian"
        },
        "geometry": {
            "type": "Point",
            "coordinates": [80.65670, 16.49949]
        }
    }, {
        "type": "Feature",
        "properties": {
            "description": "<div class=\"marker-title\">Cherry's</div><p>This is probably the most underrated place in Vijayawada. Sweets and pastries taste like heaven.</p>",
            "marker-symbol": "ice-cream"
        },
        "geometry": {
            "type": "Point",
            "coordinates": [80.66653, 16.51054]
        }
    }, {
        "type": "Feature",
        "properties": {
            "description": "<div class=\"marker-title\">Bawarchi Restaurent</div><p>Costs a fortune, but good biryani!</p>",
            "marker-symbol": "restaurant"
        },
        "geometry": {
            "type": "Point",
            "coordinates": [80.65645, 16.50083]
        }
    }, {
        "type": "Feature",
        "properties": {
            "description": "<div class=\"marker-title\">Home Sweet Home</div><p>:)</p>",
            "marker-symbol": "zoo"
        },
        "geometry": {
            "type": "Point",
            "coordinates": [80.67559, 16.51758]
        }
    }, {
        "type": "Feature",
        "properties": {
            "description": "<div class=\"marker-title\">Benz Circle</div><p>This is where all the main roads in Vijayawada meet. Center of the city.</p>",
            "marker-symbol": "circle-stroked"
        },
        "geometry": {
            "type": "Point",
            "coordinates": [80.65398, 16.49786]
        }
    }, {
        "type": "Feature",
        "properties": {
            "description": "<div class=\"marker-title\">Inox</div><p>Movies. Yo.</p>",
            "marker-symbol": "cinema"
        },
        "geometry": {
            "type": "Point",
            "coordinates": [80.65997, 16.50270]
        }
    }, {
        "type": "Feature",
        "properties": {
            "description": "<div class=\"marker-title\">Mapbox</div><p>Hey there!</p>",
            "marker-symbol": "rocket"
        },
        "geometry": {
            "type": "Point",
            "coordinates": [77.63689, 12.98107]
        }
    }]
};

function addMarkers(){
  // Add marker data as a new GeoJSON source.
  map.addSource("markers", {
      "type": "geojson",
      "data": markers
  });
  // Add a layer showing the markers.
  map.addLayer({
      "id": "markers",
      "type": "symbol",
      "source": "markers",
      "layout": {
          "icon-image": "{marker-symbol}-15",
          "icon-allow-overlap": true
      }
  });
}



map.on('load', function () {
  // addMarkers();
});

map.on('style.load',function(){
  console.log('Hello');


  addMarkers();
});














// When a click event occurs near a marker icon, open a popup at the location of
// the feature, with description HTML from its properties.
map.on('click', function (e) {
    var features = map.queryRenderedFeatures(e.point, { layers: ['markers'] });
    if (!features.length) {
        return;
    }
    var feature = features[0];
    // Populate the popup and set its coordinates
    // based on the feature found.
    var popup = new mapboxgl.Popup()
        .setLngLat(feature.geometry.coordinates)
        .setHTML(feature.properties.description)
        .addTo(map);
});
// Use the same approach as above to indicate that the symbols are clickable
// by changing the cursor style to 'pointer'.
map.on('mousemove', function (e) {
    var features = map.queryRenderedFeatures(e.point, { layers: ['markers'] });
    map.getCanvas().style.cursor = (features.length) ? 'pointer' : '';
});




var layerList = document.getElementById('menu');
var inputs = layerList.getElementsByTagName('input');


function switchLayer(layer) {
  var layerId = layer.target.id;
  map.setStyle('mapbox://styles/mapbox/' + layerId + '-v8');
}
for (var i = 0; i < inputs.length; i++) {
  inputs[i].onclick = switchLayer;
}



// Add a popping out message
map.addControl(new mapboxgl.Navigation());
var tooltip = new mapboxgl.Popup({closeOnClick: false})
    .setLngLat([80.65437, 16.49828])
    .setHTML('<h2>Close this Pop and try clicking on some icons here :) </h2>')
    .addTo(map);




function fly() {
  // Fly to a random location by offsetting the point -74.50, 40
  // by up to 5 degrees.
  map.flyTo({
    center: [
      77.63682,
      12.98108]
    });
  }








</script>






</body>
</html>
